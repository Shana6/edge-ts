language: node_js

node_js:
- node

compiler:
  - gcc

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - gcc-4.8
      - g++-4.8

install:
 - sudo apt-key adv --keyserver pgp.mit.edu --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF
 - sudo sh -c "echo 'deb http://download.mono-project.com/repo/debian wheezy main' >> /etc/apt/sources.list.d/mono-xamarin.list"
 - sudo sh -c "echo 'deb http://download.mono-project.com/repo/debian wheezy-libtiff-compat main' >> /etc/apt/sources.list.d/mono-xamarin.list"
 - sudo apt-get update
 - sudo apt-get install mono-devel
 - export CC="gcc-4.8"
 - export CXX="g++-4.8"
 - export LINK="gcc-4.8"
 - export LINKXX="g++-4.8"
 - npm install

script: gulp

after_success:
- npm install -g codeclimate-test-reporter
- codeclimate-test-reporter < coverage/lcov.info

deploy:
  provider: pages
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  local_dir: docs
  on:
    branch: master

env:
  matrix:
    secure: fruD3CAy4JP8l/cuPxZRsK3Zz7WYgJnBpmj7tPUsXJ9K9V688puVjJD/pQ6/bgYN62UuoZUEc+ULR7xjWVDGwuAhv0vTR0DgVOS0U7rwTBpWUopxx0gm7QGXinzEM2Upn5b7yXwBK5uY90C0AH6iGWahMn5LhAZnqeVMcw258LjXXM3jvDor0ucQ9lqwBTg7f15J3Lh/ibzLcXDSyJtionvYW/hFmxGX8asrgL8YeGoCq7xR9l2RXafYQpWlLnC7+KvZb8NCflzW7Os5e4W4QvnKFrtmaQxNgDARLE8Yygt+ponOfXdRHoDQY0eeeAcA2HuctGzM/f1lg8tLRc+n6FGvpHl4dg0Zxldnxn8rrsV3BZsGK2jTqITHBvLlT/DSaFMgQV0fVcq+PhneJgFLXaLSX118056bFyYfMOA09bIU4IpQUjJyvCd/VScs2DaGOeTJQ/lI+NbzfVeVFqYBfnZWAeF9u6t4WDr79BBmWnroXS4wdB8IfHmdeeraN3kxysAPCyntd/nBrrLhtTBu+3H0giREyaz3TzX9QP+QJMl7aEJq1t+THT9RR32c8pfTxInHqaYdYvb3WHShYe5Sjqu1+VgGOmpSGSJN5zG9cGVgMJEK4sFcGH7GPWjzrS7HB77fEA99xD3BDOLWrB6NrqFkuUiHrYjVhoFroKSh4dM=
